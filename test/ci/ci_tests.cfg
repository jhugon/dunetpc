[test lar_ci_openold_detsim_dunetpc]
script=$DUNETPC_DIR/test/duneopenold_detsim.sh
inputfiles=/pnfs/dune/mc/dune/simulated/002/singleparticle_antimu_20141105_Simulation009.root
args=singleparticle_antimu_20141105_Simulation009.root
output1=openclose_detsim_dune.root
output2=openclose_detsim_hist_dune.root
parse_art_output=True
mem_usage_range=10:20000000
cpu_usage_range=10:6000

[test lar_ci_openold_reco_dunetpc]
requires=lar_ci_openold_detsim_dunetpc
script=$DUNETPC_DIR/test/duneopenold_reco.sh
output1=openclose_reco_dune.root
output2=openclose_reco_hist_dune.root
parse_art_output=True
mem_usage_range=10:20000000
cpu_usage_range=10:6000


[test lar_ci_prodsingle_dunetpc]
script=${DUNETPC_DIR}/test/prodsingletest.sh
args=
output1=single_dune_gen.root
output2=single_dune_hist.root
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[suite lar_ci_suite_dunetpc]
testlist=lar_ci_prodsingle_dunetpc 

[suite lar_ci_suite2_dunetpc]
testlist=lar_ci_openold_reco_dunetpc 
#testlist=lar_ci_openold_detsim_dunetpc 


[suite default_dunetpc]
testlist=lar_ci_suite_dunetpc lar_ci_suite2_dunetpc



[DEFAULT]
STEPS_DUNETPC = none gen geant detsim reco ana
LARSOFT_REFERENCE_VERSION_DUNETPC=default
BASEFILENAME_DUNETPC=AntiMuonCutEvents_LSU_v2_dune35t
EXPCODE_DUNETPC=dunetpc
EXPSCRIPT_DUNETPC=ci_regression_test_dunetpc.sh
INPUTFILEDIR_DUNETPC=/pnfs/dune/persistent/users/vito/ci_tests_inputfiles

[test ci_gen_regression_test_dunetpc]
script=${DUNETPC_DIR}/test/%(EXPSCRIPT_DUNETPC)s
STEP=1
NEVENTS=1
args=%(NEVENTS)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(BASEFILENAME_DUNETPC)s %(EXPCODE_DUNETPC)s %(STEPS_DUNETPC)s
inputfiles=%(INPUTFILEDIR_DUNETPC)s/AntiMuonCutEvents_100.txt %(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_gen_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/testmask.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_geant_regression_test_dunetpc]
script=${DUNETPC_DIR}/test/%(EXPSCRIPT_DUNETPC)s
STEP=2
NEVENTS=1
args=%(NEVENTS)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(BASEFILENAME_DUNETPC)s %(EXPCODE_DUNETPC)s %(STEPS_DUNETPC)s
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_geant_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_gen_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/G4RandomSeeds_Ref.dat %(INPUTFILEDIR_DUNETPC)s/testmask.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_detsim_regression_test_dunetpc]
script=${DUNETPC_DIR}/test/%(EXPSCRIPT_DUNETPC)s
STEP=3
NEVENTS=1
args=%(NEVENTS)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(BASEFILENAME_DUNETPC)s %(EXPCODE_DUNETPC)s %(STEPS_DUNETPC)s
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_detsim_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_geant_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/DetSimRandomSeeds_Ref.dat %(INPUTFILEDIR_DUNETPC)s/testmask.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_reco_regression_test_dunetpc]
script=${DUNETPC_DIR}/test/%(EXPSCRIPT_DUNETPC)s
STEP=4
NEVENTS=1
args=%(NEVENTS)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(BASEFILENAME_DUNETPC)s %(EXPCODE_DUNETPC)s %(STEPS_DUNETPC)s
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_reco_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_detsim_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/testmask.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_ana_regression_test_dunetpc]
script=${DUNETPC_DIR}/test/%(EXPSCRIPT_DUNETPC)s
STEP=5
NEVENTS=1
args=%(NEVENTS)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(BASEFILENAME_DUNETPC)s %(EXPCODE_DUNETPC)s %(STEPS_DUNETPC)s
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_ana_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_reco_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/testmask.txt
parse_art_output=True
mem_usage_range=100:32000000 ;the upperlimit have been increased from 20000000 to 32000000
cpu_usage_range=10:60000



[suite quick_test_dunetpc]
testlist=ci_gen_regression_test_dunetpc ci_geant_regression_test_dunetpc ci_detsim_regression_test_dunetpc ci_reco_regression_test_dunetpc ci_ana_regression_test_dunetpc


# Sequential tests
[test ci_gen_regression_seq_test_dunetpc]
script=${DUNETPC_DIR}/test/ci_regression_seq_test_dunetpc.sh
NEVENTS=10
STEP=1
STAGE=gen
args=%(NEVENTS)s %(STAGE)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(EXPCODE_DUNETPC)s %(BASEFILENAME_DUNETPC)s_Current_%(STAGE)s.root
inputfiles=%(INPUTFILEDIR_DUNETPC)s/AntiMuonCutEvents_100.txt %(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_%(STAGE)s_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/testmask_seq.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_geant_regression_seq_test_dunetpc]
requires=ci_gen_regression_seq_test_dunetpc
script=${DUNETPC_DIR}/test/ci_regression_seq_test_dunetpc.sh
NEVENTS=10
STEP=2
STAGE=geant
args=%(NEVENTS)s %(STAGE)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(EXPCODE_DUNETPC)s %(BASEFILENAME_DUNETPC)s_Current_%(STAGE)s.root ../%(requires)s/%(BASEFILENAME_DUNETPC)s_Current_gen.root
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_%(STAGE)s_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/G4RandomSeeds_Ref.dat %(INPUTFILEDIR_DUNETPC)s/testmask_seq.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_detsim_regression_seq_test_dunetpc]
requires=ci_geant_regression_seq_test_dunetpc
script=${DUNETPC_DIR}/test/ci_regression_seq_test_dunetpc.sh
NEVENTS=10
STEP=3
STAGE=detsim
args=%(NEVENTS)s %(STAGE)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(EXPCODE_DUNETPC)s %(BASEFILENAME_DUNETPC)s_Current_%(STAGE)s.root ../%(requires)s/%(BASEFILENAME_DUNETPC)s_Current_geant.root
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_%(STAGE)s_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/DetSimRandomSeeds_Ref.dat %(INPUTFILEDIR_DUNETPC)s/testmask_seq.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_reco_regression_seq_test_dunetpc]
requires=ci_detsim_regression_seq_test_dunetpc
script=${DUNETPC_DIR}/test/ci_regression_seq_test_dunetpc.sh
NEVENTS=10
STEP=4
STAGE=reco
args=%(NEVENTS)s %(STAGE)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(EXPCODE_DUNETPC)s %(BASEFILENAME_DUNETPC)s_Current_%(STAGE)s.root ../%(requires)s/%(BASEFILENAME_DUNETPC)s_Current_detsim.root
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_reco_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/testmask_seq.txt
parse_art_output=True
mem_usage_range=100:20000000
cpu_usage_range=10:60000

[test ci_ana_regression_seq_test_dunetpc]
requires=ci_reco_regression_seq_test_dunetpc
script=${DUNETPC_DIR}/test/ci_regression_seq_test_dunetpc.sh
NEVENTS=10
STEP=5
STAGE=ana
args=%(NEVENTS)s %(STAGE)s %(STEP)s %(LARSOFT_REFERENCE_VERSION_DUNETPC)s %(EXPCODE_DUNETPC)s %(BASEFILENAME_DUNETPC)s_Current_%(STAGE)s.root ../%(requires)s/%(BASEFILENAME_DUNETPC)s_Current_reco.root
inputfiles=%(INPUTFILEDIR_DUNETPC)s/%(BASEFILENAME_DUNETPC)s_Reference_ana_%(LARSOFT_REFERENCE_VERSION_DUNETPC)s.root %(INPUTFILEDIR_DUNETPC)s/testmask_seq.txt
parse_art_output=True
mem_usage_range=100:23000000 ;the upperlimit have been increased from 20000000 to 23000000
cpu_usage_range=10:60000

[suite seq_test_dunetpc]
testlist=ci_gen_regression_seq_test_dunetpc ci_geant_regression_seq_test_dunetpc ci_detsim_regression_seq_test_dunetpc ci_reco_regression_seq_test_dunetpc ci_ana_regression_seq_test_dunetpc
